import{r as o,a as S,d as $,o as L,c as v,b as r,n as A,t as M,e as F,u as N,f as l,w as n,g as T,h as j,i as _,j as g,k as D,p as z,l as G,m as H,q as J,_ as K}from"./index-3760782f.js";import{c as O}from"./common-710cc58b.js";import{s as u}from"./request-c9b17271.js";const P={login:t=>u({url:"/auth/login",method:"post",data:t}),getfishList:t=>u({url:"/fish/list",method:"get",params:t}),queryFish:t=>u({url:"/fish/query",method:"get",params:t}),randomImage:t=>u({url:"/fish/randomImage",method:"get",params:t}),addFish:t=>u({url:"/fish/addFish",method:"post",data:t}),updateFish:t=>u({url:"/fish/update",method:"post",data:t})},I="http://82.156.211.214:94/static/",Q=t=>{const m=o(I+t),h=p=>{m.value=I+p},w=t?m:o("");return S({uri:w,setImage:h})},W=t=>(z("data-v-401e6b8e"),t=t(),G(),t),X={class:"w-full h-full fish-login"},Y={class:"box-card shadow-2xl h-full w-full sm:h-auto sm:w-96"},Z={class:"clearfix flex flex-row justify-between items-center card-header"},ee=W(()=>r("span",{class:"text-4xl"},"登录",-1)),te={class:"flex items-center"},se={key:0,id:"tako-text"},oe=["src"],ae={style:{padding:"20px"}},le=$({__name:"login",setup(t){const m=Q("tako.png"),h=H(),w=j(),p=o(),s=S({name:"",password:""}),U=S({name:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),i=o("password"),c=o(""),d=o(""),b=o(!1),x=o(!1),y=o();L(()=>{y.value=w.query.redirectUrl||"/report",console.log(y.value)});const q=async f=>{await f.validate(e=>{if(e)B();else return!1})},B=()=>{b.value=!0,x.value=!0;let f={name:s.name.trim(),password:O.AESEncrypt(s.password)};P.login(f).then(e=>{e.data.resultCode==="01"?(c.value="success",d.value="登录成功",J.setUserLocal(e.data.resultData),setTimeout(()=>h.push(y.value),1e3)):(c.value="error",d.value=e.data.msg),b.value=!1,x.value=!1}).catch(()=>{c.value="error",d.value="网络错误"})},V=()=>{s.name=s.name.trim(),s.password=s.password.trim()};return(f,e)=>{const C=_("el-input"),k=_("el-form-item"),E=_("el-button"),R=_("el-form");return g(),v("div",X,[r("div",Y,[r("div",Z,[ee,r("div",te,[d.value?(g(),v("div",se,[r("span",{class:A(c.value=="error"?"text-red-500":"text-green-500")},M(d.value),3)])):F("",!0),r("img",{src:N(m).uri,alt:"login-logo",class:"w-20 h-20 tako-animate"},null,8,oe)])]),r("div",ae,[l(R,{disabled:x.value,model:s,rules:U,onSubmit:e[7]||(e[7]=T(()=>{},["prevent"])),ref_key:"ruleFormRef",ref:p,"label-position":"top","label-width":"100px",class:"demo-ruleForm"},{default:n(()=>[l(k,{label:"用户名",prop:"name"},{default:n(()=>[l(C,{modelValue:s.name,"onUpdate:modelValue":e[0]||(e[0]=a=>s.name=a),onBlur:e[1]||(e[1]=a=>V())},null,8,["modelValue"])]),_:1}),l(k,{label:"密码",prop:"password"},{default:n(()=>[l(C,{type:i.value,modelValue:s.password,"onUpdate:modelValue":e[4]||(e[4]=a=>s.password=a),autocomplete:"off",onBlur:e[5]||(e[5]=a=>V())},{suffix:n(()=>[i.value==="password"?(g(),v("i",{key:0,class:"iconfont icon-hide",onClick:e[2]||(e[2]=a=>i.value="text")})):F("",!0),i.value==="text"?(g(),v("i",{key:1,class:"iconfont icon-browse",onClick:e[3]||(e[3]=a=>i.value="password")})):F("",!0)]),_:1},8,["type","modelValue"])]),_:1}),l(k,null,{default:n(()=>[l(E,{type:"primary","native-type":"submit",class:"w-full mt-4",onClick:e[6]||(e[6]=a=>q(p.value)),loading:b.value},{default:n(()=>[D("登录 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["disabled","model","rules"])])])])}}});const ie=K(le,[["__scopeId","data-v-401e6b8e"]]);export{ie as default};
